# Synthesizer (Chat Mode - Electronics) Recipe
# Specialized response generation for electronics commerce queries
# Uses electronics-specific synthesis prompt

name: synthesizer_chat_electronics
role: synthesizer
phase: synthesis
mode: chat
content_type: electronics

# Prompt fragments (loaded in order)
prompt_fragments:
  - "apps/prompts/synthesizer/common.md (290 tokens)"
  - "apps/prompts/synthesizer/synthesis_electronics.md (1100 tokens)"

# Input documents (Unified Flow: context.md + toolresults.md for full data)
input_docs:
  - path: "context.md"
    optional: false
    max_tokens: 2500
    path_type: "turn"
    description: "Unified context document with §0-§4"
  - path: "toolresults.md"
    optional: true
    max_tokens: 3000
    path_type: "turn"
    description: "Full tool execution results with product details, prices, and URLs"

# Output documents (what this role creates)
output_docs:
  - "response.md"

# Token budget (hard limits enforced by Doc Pack Builder)
token_budget:
  total: 10100
  prompt: 1390          # Fixed cost: common.md (290) + synthesis_electronics.md (1100)
  input_docs: 5500      # Budget for context.md (2500) + toolresults.md (3000)
  output: 2900          # Expected answer size
  buffer: 310           # Safety margin

# Trimming strategy (if budget exceeded)
trimming_strategy:
  method: truncate_end
  target: 9800

# Output schema
output_schema: ANSWER

# Description
description: |
  Synthesizer for electronics commerce queries.

  **Content-Type Specialization:**
  - Price comparison tables (side-by-side specs)
  - Specs breakdown format (CPU, GPU, RAM, Storage, Display)
  - Clear price-sorted recommendations for "cheapest" queries
  - Technical accuracy focus

  **Unified Flow Integration:**
  - Reads context.md (§0-§4) + toolresults.md for full product data
  - Output is appended to context.md as §5

  Phase: Synthesis (Phase 5 in unified flow)
  Mode: Chat
  Content Type: Electronics
